<div class="restaurants-container">
    <div class="header">
        <div class="navbar">
            <div class="navbar-start">
                <%= link_to image_tag "logo.png" %>
                <div class="links-container">
                    <%= link_to "Project Quarantine", root_path, class: "navbar-link" %>
                    <%= link_to "powered by Bikky", "https://bikky.com/", class: "navbar-url" %>
                </div>
            </div>

            <div class="navbar-item-container">
                <%= link_to "Submit a Restaurant", "https://forms.gle/viD4gsHDrCNwxdtKA", class: "navbar-item", target: "_blank" %>
                <%= link_to "Guides", pages_guides_path, class: "navbar-item" %>
            </div>
        </div>

        <div class="content">
            <h1 class="heading"> Your curated guide to <br /> eating during COVID </h1>
        </div>
    </div>

    <div class="restaurants-main-content">
        <div class="long-description"> 
            <p> No third-party delivery shenanigans here (unless we can confirm it’s commission-free ordering). Our restaurants need us more than ever before...and let’s face it, my kids can only handle a frozen veggie burger for maybe one more day. </p>
            <p> You’ll have to go through the absolutely excruciating challenge of creating a new account when you order...but let’s face it, you’re not really in a rush to get somewhere, are you? </p>
            <p> Start ordering and boost your local economy. Let’s goooooooo! </p>
        </div>
        <%= form_with url: restaurants_path, method: :get, local: true, class: "search-form" do |f| %>
            <div class="search-item-container"> <span> Search </span> </div>
            <div class="search-input-container">
                <input type="text" name="q" onFocus="geolocate()" id="autocomplete" class="input" placeholder="123 5th Avenue New York, NY 10022" />
            </div>
            <div class="seach-submit-button-container">
                <%= f.submit "Find Restaurants", class: "submit-button" %>
            </div>
        <% end %>
        <div class="filters-contaniner">
            <div class="select-container">
                <%= select_tag "filter1", options_for_select([
                    "Breakfast", "Lunch", "Dinner", 
                    "Afternoon delight"]), {prompt: "What meal?"} %>
            </div>
            <div class="select-container">
                <%= select_tag "filter1", options_for_select([
                    "Social distance (individual)", "Trapped with roommate (sharing)", 
                    "Party indoors"]), {prompt: "How many people?"} %>
            </div>
            <div class="select-container">
                <%= select_tag "filter1", options_for_select([
                    "Chillin with homies", "TREAT YO SELF", "Too cool for school", 
                    "It’s a family affair", "Keep grindin", "Home comfort", 
                    "Your body is a temple", "Oh you fancy huh?"]), {prompt: "What's the mood?"} %>
            </div> 
            <div class="select-container">
                <%= select_tag "filter1", options_for_select(["$", "$$"]), {prompt: "How much?"} %>
            </div>
            <div class="select-container">
                <%= select_tag "filter1", options_for_select(["Yes", "No"]), {prompt: "Any deals?"} %>
            </div> 
        </div>

        <div class="restaurants-table-container">
            <% if @restaurants.any? %>
                <% @restaurants.each do |restaurant| %>
                    <h1 class="heading" style="margin-bottom: 8px;"> 
                        <%  case restaurant[0]
                            when "Dos Toros"
                                motto = "Because you want an office lunch but are on your couch in your underwear"
                            when "Stone Bridge"
                                motto = "Because you’re streaming Twitch / eSports more than ever before"
                            when "PB&K" || "Juice Press"
                                motto = "Because you just gotta get back on your Peloton"
                            when "Bareburger"
                                motto = "Because food comas are a form of happiness"
                            when "Happiness Foods"
                                motto = "Because this quarantine ain’t getting me down"
                            when "test"
                                motto = ""
                            else
                                motto = restaurant[0]
                            end
                        %> 
                        <%= motto %>
                    </h1>
                    <div class="cards-container">
                        <% restaurant[1].each do |r| %>
                        <div class="card">
                            <div class="card-header">
                                <h1> DEAL: </h1>
                                <p> 10% off Full Order</p>
                            </div>
                            <div class="card-content">
                                <div>
                                    <h1 class="card-heading"> <%= r.name %> </h1>
                                    <div class="card-img" style="background-image: url(<%= image_url(r.display_image) %>);"> </div>
                                    <p class="card-description"> <%= truncate(r.description, :length => 144) %> </p>
                                </div>
                                
                                <div class="card-footer">
                                    <%= link_to "Order Direct", r.url, target: "_blank", class: "footer-item" %>
                                </div>
                            </div>
                        </div>
                        <% end %>
                    </div>
                <% end %>
            <% else %>
                <%= link_to "https://forms.gle/viD4gsHDrCNwxdtKA", target: "_blank" do %>
                        <p class="italic w-full"> Didn't find the restaurant you're looking for? <span class="font-bold"> Submit your request </span> and our team will look into publishing it soon! </p>
                <% end %>
            <% end %>
        </div>
    </div>
</div>